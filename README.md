# rabbitmq-lib
RabbitMQ library (for pharm-pl-client-d6)

Библиотека для RabbitMQ, которая позволяет:

    * Публиковать сообщения, к декларированием exchanges,queues,bindings    
    
Реализовано в рамках проекта программы лояльности "Мое здоровье" 
для интеграции ПК "Аптека-Фармация" и RabbitMQ.

#### Функции логгирования
Используются для логгирования как "внутри" библиотеки, так и 
"снаружи" т.е. лог общий для библиотеки

1. InitLog(имя файла) -  Инициализация логгера 
1. PrintLog(строка) - Добавление в лог пользователем библиотеки
1. CloseLog() закрыть лог



#### Функции RabbitMQ
1. Connect(строка подключения, таймаут) - Подключается к RabbitMQ. Возвращает идентификатор подключения. 
1. Connected(идподключения) - Проверяет и возвращает 1-при подключении к RabbitMQ
1. NewChannel(идподключения) - Создает канал и возвращает идентификатор канала 
1. ExchangeDeclare(идканала, имя, тип,...) Декларирует обменник
1. QueueDeclare(идканала, имя,...) Декларирует очередь
1. QueueBind(идканала,очередь,обменник,ключ,...) Связывает обменник-очередь-ключ и/или...
1. Publish(идканала,обменник,ключ,...,сообщение) Публикует сообщение
1. CloseChannel(идканала) Закрывает канал
1. Disconnect(идподключения) Отключается от RabbitMQ

После закрытия канала или подключения используйте FreeObject.

#### Общие или специальные функции
1. FreeObject(ид объекта). Возвращает объект GC.
1. MapArgs. Инициализует map, возвращает ид. Используется для передачи дополнительных аргументов при декларации обменников, очередей
1. MapArgsAdd(идкарты, ключ, значение) - Добавляет ключ-значение в map

Map не обходимо вернуть GC FreeObject.